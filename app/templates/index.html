<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | –°–∞–ª–æ–Ω –ö—Ä–∞—Å–æ—Ç—ã</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/material_blue.css">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; color: #333; }
        .navbar { background: #fff; border-bottom: 1px solid #e0e0e0; margin-bottom: 30px; }
        .card { border: none; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .btn-primary { background-color: #6366f1; border: none; }
        .btn-primary:hover { background-color: #4f46e5; }
        .table thead { background-color: #f1f5f9; }
        .flatpickr-input { background-color: #fff !important; }
        .service-badge { font-size: 0.85rem; padding: 5px 10px; border-radius: 20px; background: #e0e7ff; color: #4338ca; }
    </style>
</head>
<body>

<nav class="navbar navbar-light bg-white p-3">
    <div class="container">
        <span class="navbar-brand mb-0 h1 fw-bold text-primary">üå∏ BeautyAdmin</span>
    </div>
</nav>

<div class="container">
    <div class="row">
        <div class="col-lg-4">
            <div class="card p-4 mb-4">
                <h5 class="fw-bold mb-3">–ó–∞–ø–∏—Å–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</h5>
                <form action="/add" method="post">
                    <div class="mb-3">
                        <label class="form-label text-muted small fw-bold">–ò–ú–Ø –ö–õ–ò–ï–ù–¢–ê</label>
                        <input type="text" name="client_name" class="form-control" placeholder="–ù–∞–ø—Ä: –ê–Ω–Ω–∞ –ò–≤–∞–Ω–æ–≤–∞" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label text-muted small fw-bold">–£–°–õ–£–ì–ê</label>
                        <select name="service_type" class="form-select" required>
                            <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ...</option>
                            <optgroup label="–ù–æ–≥—Ç–∏">
                                <option value="–ú–∞–Ω–∏–∫—é—Ä">–ú–∞–Ω–∏–∫—é—Ä</option>
                                <option value="–ü–µ–¥–∏–∫—é—Ä">–ü–µ–¥–∏–∫—é—Ä</option>
                            </optgroup>
                            <optgroup label="–í–æ–ª–æ—Å—ã">
                                <option value="–°—Ç—Ä–∏–∂–∫–∞">–°—Ç—Ä–∏–∂–∫–∞</option>
                                <option value="–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ">–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ</option>
                            </optgroup>
                            <optgroup label="–£—Ö–æ–¥">
                                <option value="–ú–∞—Å—Å–∞–∂">–ú–∞—Å—Å–∞–∂</option>
                                <option value="–ë—Ä–æ–≤–∏">–ë—Ä–æ–≤–∏</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label text-muted small fw-bold">–î–ê–¢–ê –ò –í–†–ï–ú–Ø</label>
                        <input type="text"
                           name="appointment_time"
                           id="datetimepicker"
                           class="form-control"
                           placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è"
                           readonly
                           required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100 fw-bold">–°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å</button>
                </form>
            </div>
        </div>

        <div class="col-lg-8">
            <div class="card p-4">
                <h5 class="fw-bold mb-3">–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–ø–∏—Å–∏</h5>
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <thead>
                            <tr>
                                <th class="border-0">–ö–ª–∏–µ–Ω—Ç</th>
                                <th class="border-0">–£—Å–ª—É–≥–∞</th>
                                <th class="border-0">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                                <th class="border-0 text-end">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for booking in bookings %}
                            <tr>
                                <td class="fw-semibold">{{ booking.client_name }}</td>
                                <td><span class="service-badge">{{ booking.service_type }}</span></td>
                                <td>
                                    <div class="small fw-bold">{{ booking.appointment_time.strftime('%d.%m.%Y') }}</div>
                                    <div class="small text-muted">{{ booking.appointment_time.strftime('%H:%M') }}</div>
                                </td>
                                <td class="text-end">
                                    <div class="d-flex justify-content-end gap-2">
                                        <form action="/reschedule/{{ booking.id }}" method="post" class="d-flex gap-1 align-items-center">
                                            <input type="text" name="new_time" class="form-control form-control-sm mini-picker" placeholder="–ù–æ–≤–æ–µ –≤—Ä–µ–º—è" required style="width: 130px;">
                                            <button type="submit" class="btn btn-outline-warning btn-sm">–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏</button>
                                        </form>
                                        <a href="/delete/{{ booking.id }}" class="btn btn-outline-danger btn-sm" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?')">‚úï</a>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% if not bookings %}
                    <div class="text-center text-muted py-4">–ó–∞–ø–∏—Å–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
    const config = {
        enableTime: true,
        dateFormat: "Y-m-d H:i", // –§–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω–∏–º–∞–µ—Ç Python
        time_24hr: true,
        locale: "ru",
        allowInput: false,
        minDate: "today", // –ù–µ–ª—å–∑—è –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É
        minuteIncrement: 15
    };

    flatpickr("#datetimepicker", config);
    flatpickr(".mini-picker", config);
</script>
</body>
</html>